{"ast":null,"code":"var _jsxFileName = \"/Users/alexis/Desktop/React_App_Test/src/components/posts/Article-list.js\";\nimport React, { Component } from 'react';\nimport ArticleListItem from './Article-list-item';\nimport Loader from '../loader/loader';\nimport AddPost from './AddPost';\nimport { API_URL, METHODS, LIMIT } from '../../Constants';\nimport EditForm from './EditForm';\n\nclass ArticleList extends Component {\n  constructor(props) {\n    super(props);\n\n    this._addArticle = tab => {\n      this.setState({\n        loader: false,\n        data: [...this.state.data, tab]\n      });\n    };\n\n    this._updateArticle = upd => {\n      const filter = this.state.data.filter(item => item.id === upd.id);\n      console.log(upd.id);\n      console.log(filter[0].id);\n\n      if (upd.title) {\n        filter[0].title = upd.title;\n      }\n\n      if (upd.body) {\n        filter[0].body = upd.body;\n      }\n\n      fetch(\"\".concat(API_URL, \"/posts/\").concat(upd.id), {\n        method: METHODS.delete\n      });\n      const filterData = this.state.data.filter(item => item.id !== upd.id);\n      this.setState({\n        data: [...filterData, filter[0]]\n      });\n    };\n\n    this._editArticle = id => {\n      this.setState({\n        editId: id,\n        isUpdate: true\n      });\n    };\n\n    this._hiddenEdit = () => {\n      this.setState({\n        isUpdate: false\n      });\n    };\n\n    this.state = {\n      data: [],\n      loader: false,\n      isUpdate: false\n    };\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  async componentDidMount() {\n    this.setState({\n      loader: true\n    });\n\n    try {\n      const response = await fetch(\"\".concat(API_URL, \"/posts\").concat(LIMIT));\n      const json = await response.json();\n      this.setState({\n        data: json,\n        loader: false\n      });\n    } catch (error) {\n      console.log(\"ERROR: \" + error);\n    }\n  }\n\n  async handleClick(index) {\n    const data = this.state.data;\n    const response = await fetch(\"\".concat(API_URL, \"/posts/\").concat(index), {\n      method: METHODS.delete\n    });\n\n    if (response.status === 200) {\n      const filterData = data.filter(item => item.id !== index);\n      this.setState({\n        data: filterData\n      });\n    }\n  }\n\n  render() {\n    if (this.state.loader) {\n      return React.createElement(Loader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      });\n    }\n\n    const data = this.state.data;\n\n    if (data !== []) {\n      return React.createElement(\"div\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, this.state.isUpdate ? React.createElement(EditForm, {\n        edit: this._updateArticle,\n        idEdit: this.state.editId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }) : React.createElement(AddPost, {\n        addArticle: this._addArticle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }), React.createElement(\"ul\", {\n        className: \"dataList\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, data.map(el => {\n        return React.createElement(ArticleListItem, {\n          key: el.id,\n          object: el,\n          onEdit: () => this._editArticle(el.id),\n          onClick: () => this.handleClick(el.id),\n          hidden: () => this._isUpdate,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        });\n      })));\n    }\n  }\n\n}\n\nexport default ArticleList;","map":{"version":3,"sources":["/Users/alexis/Desktop/React_App_Test/src/components/posts/Article-list.js"],"names":["React","Component","ArticleListItem","Loader","AddPost","API_URL","METHODS","LIMIT","EditForm","ArticleList","constructor","props","_addArticle","tab","setState","loader","data","state","_updateArticle","upd","filter","item","id","console","log","title","body","fetch","method","delete","filterData","_editArticle","editId","isUpdate","_hiddenEdit","handleClick","bind","componentDidMount","response","json","error","index","status","render","map","el","_isUpdate"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport ArticleListItem from './Article-list-item'\nimport Loader from '../loader/loader';\nimport AddPost from './AddPost';\nimport {API_URL, METHODS, LIMIT} from '../../Constants'\nimport EditForm from './EditForm';\n\nclass ArticleList extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      data: [],\n      loader: false,\n      isUpdate: false\n    };\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  async componentDidMount () {\n    this.setState({\n      loader: true\n    });\n\n    try{\n      const response = await fetch (`${API_URL}/posts${LIMIT}`);\n      const json = await response.json();\n      this.setState({\n        data: json,\n        loader: false\n      })\n    } catch (error){\n      console.log(\"ERROR: \" + error)\n    }\n  }\n\n  async handleClick(index) {\n    const { data } = this.state;\n    const response = await fetch(`${API_URL}/posts/${index}` , {\n      method: METHODS.delete\n    });\n    \n    if (response.status === 200) {\n      const filterData = data.filter(item => item.id !== index)\n      this.setState({\n        data: filterData\n      });\n    }\n  }\n\n  _addArticle = tab => {\n    this.setState({\n      loader: false,\n      data: [...this.state.data, tab]\n    });\n  }\n\n  _updateArticle = upd => {\n    const filter = this.state.data.filter(item => item.id === upd.id)\n    console.log(upd.id)\n    console.log(filter[0].id)\n    if(upd.title){\n      filter[0].title = upd.title\n    }\n    if(upd.body){\n      filter[0].body = upd.body\n    }\n    fetch(`${API_URL}/posts/${upd.id}`, {\n      method: METHODS.delete\n    })\n    const filterData = this.state.data.filter(item => item.id !== upd.id)\n    this.setState({\n      data: [...filterData, filter[0]]\n    })\n  }\n\n  _editArticle = id => {\n    this.setState({\n      editId: id,\n      isUpdate: true\n    })\n  }\n\n  _hiddenEdit = () => {\n    this.setState({\n      isUpdate: false\n    })\n  }\n\n  render() {\n    if (this.state.loader) {\n      return <Loader />\n    }\n    const data = this.state.data\n    if(data !== []) {\n      \n      return (\n        <div className=''>\n        { this.state.isUpdate ? (\n          <EditForm \n            edit={this._updateArticle}\n            idEdit={this.state.editId}\n          /> \n        ) : (\n        <AddPost \n            addArticle={this._addArticle}\n          />\n        )}\n        <ul className='dataList'>\n            {data.map(el => {\n              return (\n                <ArticleListItem\n                  key={el.id}\n                  object={el}\n                  onEdit={() => this._editArticle(el.id)}\n                  onClick={() => this.handleClick(el.id)}\n                  hidden={()=>this._isUpdate}\n                />\n              )\n            })}\n          </ul>    \n        </div>\n      )\n    }\n  }\n}\n\nexport default ArticleList\n\n\n\n\n  "]},"metadata":{},"sourceType":"module"}