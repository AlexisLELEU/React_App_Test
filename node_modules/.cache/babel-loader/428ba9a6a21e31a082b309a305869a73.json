{"ast":null,"code":"var _jsxFileName = \"/Users/alexis/Desktop/React_App_Test/src/components/posts/Article-list.js\";\nimport React, { Component } from 'react';\nimport ArticleListItem from './Article-list-item';\nimport Loader from '../loader/loader';\nimport AddPost from './AddPost';\nimport { API_URL, METHODS, LIMIT } from '../../Constants';\nimport EditForm from './EditForm';\n\nclass ArticleList extends Component {\n  constructor(props) {\n    super(props);\n\n    this._addArticle = tab => {\n      this.setState({\n        loader: false,\n        data: [...this.state.data, tab]\n      });\n    };\n\n    this._editArticle = e => {\n      this.setState({\n        isUpdate: true\n      });\n    };\n\n    this.state = {\n      data: [],\n      loader: false,\n      isUpdate: false\n    };\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  async componentDidMount() {\n    this.setState({\n      loader: true\n    });\n\n    try {\n      const response = await fetch(\"\".concat(API_URL, \"/posts\").concat(LIMIT));\n      const json = await response.json();\n      console.log('JSON : ', json);\n      this.setState({\n        data: json,\n        loader: false\n      });\n    } catch (error) {\n      console.log(\"ERROR\" + error);\n    }\n  }\n\n  async handleClick(index) {\n    const data = this.state.data;\n    const response = await fetch(\"\".concat(API_URL, \"/posts/\").concat(index), {\n      method: METHODS.delete\n    });\n\n    if (response.status === 200) {\n      const filterData = data.filter(item => item.id !== index);\n      this.setState({\n        data: filterData\n      });\n    }\n  }\n\n  render() {\n    if (this.state.loader) {\n      return React.createElement(Loader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      });\n    }\n\n    if (this.state.data !== []) {\n      return React.createElement(\"div\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(AddPost, {\n        style: this.state.isUpdate ? {\n          display: 'block'\n        } : {\n          display: 'none'\n        },\n        addArticle: this._addArticle,\n        signalToUpdate: this.state.isUpdate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }), React.createElement(EditForm, {\n        style: this.state.isUpdate ? {\n          display: 'none'\n        } : {\n          display: 'block'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(\"ul\", {\n        className: \"dataList\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, this.state.data.map(el => {\n        return React.createElement(ArticleListItem, {\n          key: el.id,\n          title: el.title,\n          body: el.body,\n          onEdit: () => this._editArticle(el.id),\n          onClick: () => this.handleClick(el.id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        });\n      })));\n    }\n  }\n\n}\n\nexport default ArticleList;","map":{"version":3,"sources":["/Users/alexis/Desktop/React_App_Test/src/components/posts/Article-list.js"],"names":["React","Component","ArticleListItem","Loader","AddPost","API_URL","METHODS","LIMIT","EditForm","ArticleList","constructor","props","_addArticle","tab","setState","loader","data","state","_editArticle","e","isUpdate","handleClick","bind","componentDidMount","response","fetch","json","console","log","error","index","method","delete","status","filterData","filter","item","id","render","display","map","el","title","body"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport ArticleListItem from './Article-list-item'\nimport Loader from '../loader/loader';\nimport AddPost from './AddPost';\nimport {API_URL, METHODS, LIMIT} from '../../Constants'\nimport EditForm from './EditForm';\n\n\nclass ArticleList extends Component {\n    constructor(props){\n        super(props)\n        this.state = {\n          data: [],\n          loader: false,\n          isUpdate: false\n        };\n        this.handleClick = this.handleClick.bind(this);\n    }\n\n    async componentDidMount () {\n      this.setState({\n        loader: true\n      });\n\n      try{\n        const response = await fetch (`${API_URL}/posts${LIMIT}`);\n        const json = await response.json();\n        console.log('JSON : ', json);\n        this.setState({\n          data: json,\n          loader: false\n        })\n      } catch (error){\n        console.log(\"ERROR\" + error)\n      }\n    }\n\n    async handleClick(index) {\n      const { data } = this.state;\n      const response = await fetch(`${API_URL}/posts/${index}` , {\n        method: METHODS.delete\n      });\n      \n      if (response.status === 200) {\n        const filterData = data.filter(item => item.id !== index);\n  \n        this.setState({\n          data: filterData\n        });\n      }\n    }\n\n    _addArticle = tab => {\n      this.setState({\n        loader: false,\n        data: [...this.state.data, tab]\n      });\n    }\n\n    _editArticle = e => {\n      this.setState({\n        isUpdate: true\n      })\n    }\n\n    render() {\n      if (this.state.loader) {\n        return <Loader />;\n      }\n  \n      if(this.state.data !== []) {\n        return (\n        <div className=''>\n          <AddPost \n            style={this.state.isUpdate ? {display: 'block'} : {display: 'none'}}\n            addArticle={this._addArticle}\n            signalToUpdate={this.state.isUpdate}\n            />\n            <EditForm style={this.state.isUpdate ? {display: 'none'} : {display: 'block'}}/>\n          <ul className='dataList'>\n              {this.state.data.map(el => {\n                return (\n                  <ArticleListItem\n                    key={el.id}\n                    title={el.title}\n                    body={el.body} \n                    onEdit={() => this._editArticle(el.id)}\n                    onClick={() => this.handleClick(el.id)}\n                  />\n                )\n              })}\n            </ul>    \n        </div>\n      )\n    }\n  }\n}\n\nexport default ArticleList\n\n\n\n\n  "]},"metadata":{},"sourceType":"module"}